<!DOCTYPE html>
<html>

  <head>
    
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>

  DT-tbx website


  | R-squared and model performance evaluation

</title>
<meta name="description" content="Based on [*folio](https://github.com/bogoli/-folio) design.
">

<!-- Open Graph -->


<!-- Bootstrap & MDB -->
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" integrity="sha512-MoRNloxbStBcD8z3M/2BmnT+rg4IsMxPkXaGh2zD6LGNNFE80W3onsAhRcMAMrSoyWL9xD7Ert0men7vR8LUZg==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/css/mdb.min.css" integrity="sha512-RO38pBRxYH3SoOprtPTD86JFOclM51/XTIdEPh5j8sj4tp8jmQIx26twG52UaLi//hQldfrh7e51WzP9wuP32Q==" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.0/css/academicons.min.css" integrity="sha512-W4yqoT1+8NLkinBLBZko+dFB2ZbHsYLDdr50VElllRcNt2Q4/GSs6u71UHKxB7S6JEMCp5Ve4xjh3eGQl/HRvg==" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://combinatronics.io/jwarby/jekyll-pygments-themes/master/.css" />

<!-- Styles -->

<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üë•</text></svg>">

<link rel="stylesheet" href="/DT-tbx-v1/assets/css/main.css">
<link rel="canonical" href="/DT-tbx-v1/blog/2022/metrics/">

<!-- JQuery -->
<!-- jQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>


<!-- Theming-->

<script src="/DT-tbx-v1/assets/js/theme.js"></script>
<script src="/DT-tbx-v1/assets/js/dark_mode.js"></script>






    
<!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>


  </head>

  <body class="fixed-top-nav ">

    <!-- Header -->

    <header>

    <!-- Nav Bar -->
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
    <div class="container">
      
      <a class="navbar-brand title font-weight-lighter" href="https://markasch.github.io/DT-tbx-v1/">
       DT-tbx website
      </a>
      
      <!-- Navbar Toggle -->
      <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar top-bar"></span>
        <span class="icon-bar middle-bar"></span>
        <span class="icon-bar bottom-bar"></span>
      </button>
      <div class="collapse navbar-collapse text-right" id="navbarNav">
        <ul class="navbar-nav ml-auto flex-nowrap">
          <!-- About -->
          <li class="nav-item ">
            <a class="nav-link" href="/DT-tbx-v1/">
              about
              
            </a>
          </li>
          
          <!-- Blog -->
          <li class="nav-item active">
            <a class="nav-link" href="/DT-tbx-v1/blog/">
              blog
              
            </a>
          </li>
          
          <!-- Other pages -->
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/DT-tbx-v1/codes/">
                codes
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/DT-tbx-v1/consulting/">
                consulting
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/DT-tbx-v1/publications/">
                publications
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/DT-tbx-v1/training/">
                training
                
              </a>
          </li>
          
          
          
          
          
          <li class="nav-item ">
              <a class="nav-link" href="/DT-tbx-v1/twins/">
                twins
                
              </a>
          </li>
          
          
          
          
            <div class="toggle-container">
              <a id="light-toggle">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
              </a>
            </div>
          
        </ul>
      </div>
    </div>
  </nav>

</header>


    <!-- Content -->

    <div class="container mt-5">
      

<div class="post">

  <header class="post-header">
    <h1 class="post-title">R-squared and model performance evaluation</h1>
    <p class="post-meta">January 7, 2022</p>
  </header>

  <article class="post-content">
    <p>As mentioned in the <a href="/DT-tbx-v1/blog/2022/SUMO/">post</a> on practical surrogate modeling, special care should be taken when using and reporting performance metrics. We will discuss three major points here:</p>

<ol>
  <li>Use of \(p\)-values for regression coefficients.</li>
  <li>Use of \(R^2\) for regression analysis.</li>
  <li>Use of accuracy for classification results.</li>
</ol>

<p>These have already been discussed around the web, and Point #1 has received particular attention, even being the subject of a major <a href="https://amstat.tandfonline.com/doi/full/10.1080/00031305.2016.1154108#.Vt2XIOaE2MN" target="_blank" rel="noopener noreferrer">declaration</a> of the American Statistical Society. Their advice (in a nutshell): do <strong>NOT</strong> use \(p\)-values at all. Their (politically-correct) conclusion is:</p>

<blockquote>
	Good statistical practice, as an essential component of good scientific practice, emphasizes principles of good study design and conduct, a variety of numerical and graphical summaries of data, understanding of the phenomenon under study, interpretation of results in context, complete reporting and proper logical and quantitative understanding of what data summaries mean. No single index should substitute for scientific reasoning.
</blockquote>
<p>All is said in the last phrase: ‚ÄúNo <strong>single</strong> index should substitute for scientific <strong>reasoning</strong>.‚Äù Here, I would replace the descriptive ‚Äúscienitific‚Äù by ‚Äúobjective reasoning in context.‚Äù</p>

<h3 id="point-2">Point 2</h3>
<p>So, what about Point #2? Is \(R^2\) also dangerous? The answer is, yes - please see C. Shalizi‚Äôs <a href="http://bactra.org/" target="_blank" rel="noopener noreferrer">writings</a> on the subject. He, and others, recommend not to use \(R^2\) either. Here, I will explain why not to, and under which circumstances it can still be useful. But the principle of ‚Äúno single index‚Äù remains valid, so we should definitely base our evaluation on supplementary, or alternative metrics.</p>

<p>What is so ‚Äúdangerous‚Äù about \(R^2\)? Well, the list is quite long - see this <a href="https://data.library.virginia.edu/is-r-squared-useless/" target="_blank" rel="noopener noreferrer">presentation</a>. In summary:</p>

<ul>
  <li>\(R^2\) does not measure goodness of fit.</li>
  <li>\(R^2\) does not measure predictive error.</li>
  <li>\(R^2\) does not allow you to compare models using transformed responses.</li>
  <li>\(R^2\) does not measure how one variable explains another, contrary to its usual definition.</li>
</ul>

<p>On the positive side, \(R^2\) can be used for:</p>

<ol>
  <li>Determining whether a change of explanatory variable improves the fit.</li>
  <li>Comparing multi-variable models with different subsets of explanatory variables.</li>
  <li>Indicating collinearity when both the \(p\)-value and \(R^2\) are small.</li>
</ol>

<p>What are the alternative, or supplementary metrics that should be used here? There is general agreement that the use of a simple error metric, together with a visual appraisal based on a predicted vs. actual values plot is a good path to follow. Usually we use an \(L_1\) ot \(L_2\) based metric, such as</p>

<ul>
  <li>MAE = mean absolute error</li>
  <li>MSE = mean squared error</li>
  <li>RMSE = root mean squared error</li>
</ul>

<p>defined as</p>

\[\mathrm{MAE} = \frac{1}{n}\sum_{i=1}^{n} |y_i - \hat{y}_i  | ,\]

\[\mathrm{MSE} = \frac{1}{n}\sum_{i=1}^{n} (y_i - \hat{y}_i)^2 ,\]

\[\mathrm{RMSE} = \sqrt{\frac{1}{n}\sum_{i=1}^{n} (y_i - \hat{y}_i)^2} ,\]

<p>where \(y_i\) are the actual and \(\hat{y}_i\) are the predicted values of the response \(y.\)</p>

<h3 id="point-3">Point 3</h3>
<p>Finally, for point #3, the global accuracy of a classifictaion method is usually reported by the ratio of good classifications divided by the total number of (test) samples. That is, in the confusion (truth) table of predicted vs. true labels, we sum the diagonal elements and divide by the sum of all the elements in the matrix,</p>

\[a = \frac{\sum_{i=1}^K m_{ii}}{\sum_{i,j=1}^K m_{ij}} ,\]

<p>where there are \(K\) classes.</p>

<p>The overall accuracy,  usually reported for classification methods, can be very misleading. We recall its definition in the binary case (2 classes, Positive or Negative),</p>

\[\mathrm{accuracy} = \frac{ \mathrm{TP}+ \mathrm{TN}}{ \mathrm{TP}+ \mathrm{TN} +  \mathrm{FP}+ \mathrm{FN}},\]

<p>the proportion of true positive and negative classifications divided by the total number of samples‚Äîtrue and false positives and negatives. This is a good metric only for the case where the classes are balanced, i.e. we have approximately the same number of samples in each class. For example, if class A has 95 members and class B has 5, then by simply supposing that <em>all</em> the samples are A, we obtain an accuracy of \(0.95.\) We have not measured the accuracy of the method itself. For this, we must resort to the quantities known as precision and recall (known as ``sensitivity,‚Äô‚Äô in the binary classification case), or their harmonic mean, the \(F_1\) score. Let us recall the definitions and see which one should be used in a particular context. The precision measures the proportion of correct positive classifications, TP, among all the positives identified, TP plus FP,</p>

\[\mathrm{precision} = \frac{ \mathrm{TP}}{ \mathrm{TP}+  \mathrm{FP}}.\]

<p>This metric should be used when the cost of a false positive is high, and we want to avoid these FPs as much as possible‚Äîthink of the case of preventative maintenance, where the cost of halting and repairing a machine, unnecessarily, is too high.</p>

<p>The recall metric gives the number of positive cases correctly identified out of the total number of positives in the dataset,</p>

\[\mathrm{recall} = \frac{ \mathrm{TP}}{ \mathrm{TP} + \mathrm{FN}}.\]

<p>This metric is better suited to contexts where it is important to identify as many positives as possible‚Äîthink of the case where the failure of a critical component in a machine could have disastrous consequences. Finally, the \(F_1\) score, defined as</p>

\[F_1  = \frac{ 2}{ \mathrm{recall}^{-1}  + \mathrm{precision}^{-1} },\]

<p>provides a balanced metric, between recall and precision. One should always extract a detailed report form the model, where these quantities are displayed, for each class. Then, better conclusions can be made, taking into account</p>

<ul>
  <li>class imbalances,</li>
  <li>context-dependent gravity of the different accuracies.</li>
</ul>

<p>My colleague, Ga√´l Varoquaux, director of the <a href="https://scikit-learn.fondation-inria.fr/home/" target="_blank" rel="noopener noreferrer">scikit-learn foundation</a>, has an excellent <a href="http://gael-varoquaux.info/interpreting_ml_tuto/#" target="_blank" rel="noopener noreferrer">tutorial</a> on his site, entitled ‚ÄúUnderstanding and diagnosing your machine-learning models‚Äù that has a section on metrics for judging the success of a model.</p>


  </article>

  

</div>

    </div>

    <!-- Footer -->

    
<footer class="fixed-bottom">
  <div class="container mt-0">
    ¬© Copyright 2024 Mark A. Asch.
    Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

    
    
  </div>
</footer>



  </body>

  <!-- Bootsrap & MDB scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.4.4/umd/popper.min.js" integrity="sha512-eUQ9hGdLjBjY3F41CScH3UX+4JDSI9zXeroz7hJ+RteoCaY+GP/LDoM8AO+Pt+DRFw3nXqsjh9Zsts8hnYv8/A==" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha512-M5KW3ztuIICmVIhjSqXe01oV2bpe248gOxqmlcYrEzAvws7Pw3z6BK0iGbrwvdrUQUhi3eXgtxp5I8PDo9YfjQ==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.1/js/mdb.min.js" integrity="sha512-Mug9KHKmroQFMLm93zGrjhibM2z2Obg9l6qFG2qKjXEXkMp/VDkI4uju9m4QKPjWSwQ6O2qzZEnJDEeCw0Blcw==" crossorigin="anonymous"></script>

  
<!-- Mansory & imagesLoaded -->
<script defer src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script defer src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script defer src="/DT-tbx-v1/assets/js/mansory.js" type="text/javascript"></script>


  


<!-- Medium Zoom JS -->
<script src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script>
<script src="/DT-tbx-v1/assets/js/zoom.js"></script>


<!-- Load Common JS -->
<script src="/DT-tbx-v1/assets/js/common.js"></script>


</html>
